!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.hyperapp=t()}(this,function(){"use strict";function e(t,n,r){n.ns="http://www.w3.org/2000/svg";for(var o=0;o<r.length;o++){var i=r[o];i.data&&e(i.tag,i.data,i.children)}}function t(e){return function(t,n,r){for(var o in n)o in a&&(n[a[o]]=n[o],delete n[o]);return e(t,n,r)}}function n(e){return e===m||e===y}function r(e){return E.test(e)}var o=function(t,n){n=n||[];var r=[];r.push.apply(r,arguments),r.shift(),r.shift();var o=r[0];return r=Array.isArray(o)||void 0===o?o:r,"function"==typeof t?(n.children=r||[],t(n)):("svg"===t&&e(t,n,r),{tag:t,data:n,children:[].concat.apply([],r)})},i=t,a={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},f=i,s=0,u=1,l=2,h=3,p=4,c=5,d=6,g=7,v=8,m=9,y=10,b=11,w=12,A=function(e,t){function o(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:i("",e)}e=f(e),t||(t={});var i=t.concat||function(e,t){return String(e)+String(t)};return function(t){function a(e){var t=[];f===g&&(f=p);for(var r=0;r<e.length;r++){var o=e.charAt(r);f===u&&"<"===o?(A.length&&t.push([u,A]),A="",f=l):">"!==o||n(f)?f===u?A+=o:f===l&&/\s/.test(o)?(t.push([l,A]),A="",f=p):f===l?A+=o:f===p&&/[\w-]/.test(o)?(f=c,A=o):f===p&&/\s/.test(o)?(A.length&&t.push([c,A]),t.push([w])):f===c&&/\s/.test(o)?(t.push([c,A]),A="",f=d):f===c&&"="===o?(t.push([c,A],[b]),A="",f=g):f===c?A+=o:f!==d&&f!==p||"="!==o?f!==d&&f!==p||/\s/.test(o)?f===g&&'"'===o?f=y:f===g&&"'"===o?f=m:f===y&&'"'===o?(t.push([v,A],[w]),A="",f=p):f===m&&"'"===o?(t.push([v,A],[w]),A="",f=p):f!==g||/\s/.test(o)?f===v&&/\s/.test(o)?(t.push([v,A],[w]),A="",f=p):f!==v&&f!==m&&f!==y||(A+=o):(f=v,r--):(t.push([w]),/[\w-]/.test(o)?(A+=o,f=c):f=p):(t.push([b]),f=g):(f===l?t.push([l,A]):f===c?t.push([c,A]):f===v&&A.length&&t.push([v,A]),t.push([h]),A="",f=u)}return f===u&&A.length?(t.push([u,A]),A=""):f===v&&A.length?(t.push([v,A]),A=""):f===y&&A.length?(t.push([v,A]),A=""):f===m&&A.length?(t.push([v,A]),A=""):f===c&&(t.push([c,A]),A=""),t}for(var f=u,A="",E=arguments.length,C=[],L=0;L<t.length;L++)if(L<E-1){var N=arguments[L+1],k=a(t[L]),F=f;F===y&&(F=v),F===m&&(F=v),F===g&&(F=v),F===p&&(F=c),k.push([s,F,N]),C.push.apply(C,k)}else C.push.apply(C,a(t[L]));for(var x=[null,{},[]],S=[[x,-1]],L=0;L<C.length;L++){var M=S[S.length-1][0],k=C[L],T=k[0];if(T===l&&/^\//.test(k[1])){var j=S[S.length-1][1];S.length>1&&(S.pop(),S[S.length-1][0][2][j]=e(M[0],M[1],M[2].length?M[2]:void 0))}else if(T===l){var D=[k[1],{},[]];M[2].push(D),S.push([D,M[2].length-1])}else if(T===c||T===s&&k[1]===c){for(var B,O="";L<C.length;L++)if(C[L][0]===c)O=i(O,C[L][1]);else{if(C[L][0]!==s||C[L][1]!==c)break;if("object"!=typeof C[L][2]||O)O=i(O,C[L][2]);else for(B in C[L][2])C[L][2].hasOwnProperty(B)&&!M[1][B]&&(M[1][B]=C[L][2][B])}C[L][0]===b&&L++;for(var R=L;L<C.length;L++)if(C[L][0]===v||C[L][0]===c)M[1][O]?M[1][O]=i(M[1][O],C[L][1]):M[1][O]=o(C[L][1]);else{if(C[L][0]!==s||C[L][1]!==v&&C[L][1]!==c){!O.length||M[1][O]||L!==R||C[L][0]!==h&&C[L][0]!==w||(M[1][O]=O.toLowerCase());break}M[1][O]?M[1][O]=i(M[1][O],C[L][2]):M[1][O]=o(C[L][2])}}else if(T===c)M[1][k[1]]=!0;else if(T===s&&k[1]===c)M[1][k[2]]=!0;else if(T===h){if(r(M[0])&&S.length){var j=S[S.length-1][1];S.pop(),S[S.length-1][0][2][j]=e(M[0],M[1],M[2].length?M[2]:void 0)}}else if(T===s&&k[1]===u)void 0===k[2]||null===k[2]?k[2]="":k[2]||(k[2]=i("",k[2])),Array.isArray(k[2][0])?M[2].push.apply(M[2],k[2]):M[2].push(k[2]);else if(T===u)M[2].push(k[1]);else if(T!==b&&T!==w)throw new Error("unhandled: "+T)}if(x[2].length>1&&/^\s*$/.test(x[2][0])&&x[2].shift(),x[2].length>2||2===x[2].length&&/\S/.test(x[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(x[2][0])&&"string"==typeof x[2][0][0]&&Array.isArray(x[2][0][2])&&(x[2][0]=e(x[2][0][0],x[2][0][1],x[2][0][2])),x[2][0]}},E=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"),C=function(e){function t(){for(var e in y)y[e](c,g,w.onError)}function n(e,t,n){h(b,p=t(e,g),n,0)}function r(e){return"string"===e||"number"===e||"boolean"===e}function o(e,t){setTimeout(function(){e(t)},0)}function i(e,t){var n,o={};if(r(typeof t)||Array.isArray(t))return t;for(n in e)o[n]=e[n];for(n in t)o[n]=t[n];return o}function a(e,t){return e.tag!==t.tag||typeof e!=typeof t||r(typeof e)&&e!==t}function f(e){var t;if(r(typeof e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var n in e.data)"oncreate"===n?o(e.data[n],t):u(t,n,e.data[n]);for(var i=0;i<e.children.length;i++)t.appendChild(f(e.children[i]))}return t}function s(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)}function u(e,t,n,r){if("style"===t)for(var o in n)e.style[o]=n[o];else if("on"===t.substr(0,2)){var i=t.substr(2).toLowerCase();e.removeEventListener(i,r),e.addEventListener(i,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),e[t]=n)}function l(e,t,n){for(var r in i(n,t)){var a=t[r],f=n[r];void 0===a?s(e,r,f):a!==f&&("onupdate"===r?o(a,e):u(e,r,a,f))}}function h(e,t,n,r){if(void 0===n)e.appendChild(f(t));else if(void 0===t){for(;r>0&&!e.childNodes[r];)r--;if(r>=0){var i=e.childNodes[r];if(n&&n.data){var s=n.data.onremove;s&&o(s,i)}e.removeChild(i)}}else if(a(t,n))e.replaceChild(f(t),e.childNodes[r]);else if(t.tag){var i=e.childNodes[r];l(i,t.data,n.data);for(var u=t.children.length,p=n.children.length,c=0;c<u||c<p;c++)h(i,t.children[c],n.children[c],c)}}var p,c=e.model,d=e.view,g={},v=e.effects||{},m=e.update||{},y=e.subscriptions,b=e.root||document.body.appendChild(document.createElement("div")),w=i({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks);for(var A in i(m,v))!function(e){g[e]=function(t){w.onAction(e,t);var r=v[e];if(r)return r(c,g,t,w.onError);var o=m[e],a=c;n(c=i(c,o(c,t)),d,p),w.onUpdate(a,c,t)}}(A);return"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t),"function"==typeof d&&n(c,d),i(e,{render:function(e){n(c,d=e?e:d,p)}})},L=o,N={html:A(L),app:C,h:L};return N});
//# sourceMappingURL=hyperapp.js.map
